% !TEX TS-program = XeLaTeX
% !TEX program = XeLaTeX
%\errorcontextlines 10000

% this is not standalone
% this is latexmlAlts to test if we need alternative latexml commands

\documentclass[10pt]{book}

\input{headers/APEX_format}
\usepackage{headers/apex_style}
\input{headers/Header_Calculus}

%% LaTeXML's hyperref overwrites these
%\newcommand{\chapterautorefname}{Chap\-ter} % the default is lowercase
%\newcommand{\sectionautorefname}{Sec\-tion} % the default is lowercase
%
%\usepackage[marginparwidth=150pt]{geometry}
%\usepackage{amsmath}
%\usepackage{graphicx}
%\usepackage{tikz}
%\usepackage{enumitem}
%\usepackage{hyperref}
%\newlist{sectionexercises}{enumerate}{1}
%\newcounter{saveexercisenum}[section]
%\setlist[sectionexercises]{
%    label=((\arabic*.)),
%    before=\setcounter{sectionexercisesi}{\value{saveexercisenum}},
%    after=\setcounter{saveexercisenum}{\value{sectionexercisesi}},
%}

\begin{document}

\pagestyle{empty}

\framebox[.14\linewidth][l]{\parbox{1pt}{Chapter\\\chapterautorefname}}
\framebox[.14\linewidth][l]{\parbox{1pt}{Section\\\sectionautorefname}}
\framebox[.14\linewidth][l]{\parbox{1pt}{150.0pt\\\the\marginparwidth}}

% todo tikz matrix spacing see https://github.com/brucemiller/LaTeXML/issues/794
\noindent before\\
\begin{tikzpicture}
  \matrix[row sep=3mm,column sep=3mm]{
   \node(left){L}; &&&&&& \node(right){R};\\\\\\\\
   \node(bottom){B};\\
  };
  \draw(left)--(right)(left)--(bottom);
\end{tikzpicture}\\
after

Compare: % see 09_Parametric_Equations.tex
\[
\begin{gathered}\text{Choose}\\t\end{gathered}\quad
\tikz[>=latex,baseline=(current bounding box.center)]{\draw[->](0,.3)--(1,.6);\draw[->](0,-.3)--(1,-.6);}\quad
{\addtolength{\jot}{-.5ex}
\begin{gathered}
\text{Use a function}\\f\text{ to find }x\\\bigl(x=f(t)\bigr)\\\mbox{}\\
\text{Use a function}\\g\text{ to find }y\\\bigl(y=g(t)\bigr)
\end{gathered}
}\quad
\tikz[>=latex,baseline=(current bounding box.center)]{\draw[->](0,.6)--(1,.3);\draw[->](0,-.6)--(1,-.3);}\quad
\begin{gathered}\text{Plot point}\\(x,y)\end{gathered}
\]
to:
\[
\begin{gathered}\text{Choose}\\t\end{gathered}\quad
\begin{gathered}
\rotatebox{20}{$\xrightarrow{\hspace{1cm}}$}\\\\
\rotatebox{-20}{$\xrightarrow{\hspace{1cm}}$}
\end{gathered}\quad
{\addtolength{\jot}{-.5ex}
\begin{gathered}
\text{Use a function}\\f\text{ to find }x\\\bigl(x=f(t)\bigr)\\\\
\text{Use a function}\\g\text{ to find }y\\\bigl(y=g(t)\bigr)
\end{gathered}
}\quad
\begin{gathered}
\rotatebox{-20}{$\xrightarrow{\hspace{1cm}}$}\\\\
\rotatebox{20}{$\xrightarrow{\hspace{1cm}}$}
\end{gathered}\quad
\begin{gathered}\text{Plot point}\\(x,y)\end{gathered}
\]
to:
\begin{center}
\begin{tikzpicture}[>=latex]
\draw (0,0) node (A) [align=center] {Choose \\$t$} 
    (3,1) node[align=center] (B1) {Use a function\\ $f$ to find $x$\\$\bigl(x=f(t)\bigr)$}
	(3,-1) node[align=center] (B2) {Use a function\\ $g$ to find $y$\\$\bigl(y=g(t)\bigr)$}
	(6.25,0) node [align=center] (C) {Plot point \\ $(x,y)$};
\draw [->](A) --(B1);
\draw [->](A) --(B2);
\draw [->](B1) -- (C);
\draw [->](B2) -- (C);
\end{tikzpicture}
\end{center}

\begingroup
\setlist[enumerate,1]{label=((\alph*))}
\begin{sectionexercises}
\item problem should be ((1.)) Has parts:
\begin{enumerate}
\item should be ((a))
\item should be ((b))
\end{enumerate}
\end{sectionexercises}
in between
\begin{sectionexercises}
\item problem should be ((2.))
\end{sectionexercises}
\endgroup
\closeenumerate

\begingroup
\setlist[enumerate,1]{label=((\alph*))}
\begin{sectionexercises}
\exercise{problem should be ((3.)) Has parts:
\begin{enumerate}
\item should be ((a))
\item should be ((b))
\end{enumerate}}{}
\endgroup
\exercise{problem should be ((3?))}{}
\closeenumerate

\printexercises{exercises/14-04-exercises}

\end{document}
