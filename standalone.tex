% !TEX TS-program = XeLaTeX
% !TEX program = XeLaTeX
%\errorcontextlines 10000

% this is not standalone
% this is latexmlAlts to test if we need alternative latexml commands

\documentclass[10pt]{book}

%\input{headers/APEX_format}
%\usepackage{headers/apex_style}
%\input{headers/Header_Calculus}

% LaTeXML's hyperref overwrites these
\newcommand{\chapterautorefname}{Chap\-ter} % the default is lowercase
\newcommand{\sectionautorefname}{Sec\-tion} % the default is lowercase

\usepackage[marginparwidth=150pt]{geometry}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{enumitem}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{hyperref}
\newlist{sectionexercises}{enumerate}{1}
\newcounter{saveexercisenum}[section]
\setlist[sectionexercises]{
    label=\arabic*.,
    ref=\arabic*, % ref overrides label
    before=\setcounter{sectionexercisesi}{\value{saveexercisenum}},
    after=\setcounter{saveexercisenum}{\value{sectionexercisesi}},
}

\setlength{\parskip}{2\baselineskip}

\begin{document}

\pagestyle{empty}

% https://github.com/latex3/hyperref/blob/main/hyperref.dtx
% we use lines 5316ff
% but line 5757(?) makes the defs act like provide command
\framebox[.14\linewidth][l]{\parbox{1pt}{Chap\-ter\\\chapterautorefname}}
\framebox[.14\linewidth][l]{\parbox{1pt}{Sec\-tion\\\sectionautorefname}}

150.0pt:\the\marginparwidth

% todo tikz matrix spacing see https://github.com/brucemiller/LaTeXML/issues/794
\noindent before\\
\begin{tikzpicture}
  \matrix[row sep=3mm,column sep=3mm]{
   \node(left){L}; &&&&&& \node(right){R};\\\\\\\\
   \node(bottom){B};\\
  };
  \draw(left)--(right)(left)--(bottom);
\end{tikzpicture}\quad
\begin{tikzpicture}
  \matrix {
    & \node (A) {A}; \\
    \node{B};&& \node(C){C}; \\
  };
  \draw (A.south) -- (A|- C.south);
\end{tikzpicture}\\
after

Compare: % see 09_Parametric_Equations.tex
\[
\begin{gathered}\text{Choose}\\t\end{gathered}\quad
\tikz[>=latex,baseline=(current bounding box.center)]{\draw[->](0,.3)--(1,.6);\draw[->](0,-.3)--(1,-.6);}\quad
{\addtolength{\jot}{-.5ex}
\begin{gathered}
\text{Use a function}\\f\text{ to find }x\\\bigl(x=f(t)\bigr)\\~\\
\text{Use a function}\\g\text{ to find }y\\\bigl(y=g(t)\bigr)
\end{gathered}
}\quad
\tikz[>=latex,baseline=(current bounding box.center)]{\draw[->](0,.6)--(1,.3);\draw[->](0,-.6)--(1,-.3);}\quad
\begin{gathered}\text{Plot point}\\(x,y)\end{gathered}
\]
to:
\[
\begin{gathered}\text{Choose}\\t\end{gathered}\quad
\begin{gathered}
\rotatebox{-20}{\scalebox{2}{$\nearrow$}}\\
\rotatebox{20}{\scalebox{2}{$\searrow$}}
\end{gathered}\quad
{\addtolength{\jot}{-.5ex}
\begin{gathered}
\text{Use a function}\\f\text{ to find }x\\\bigl(x=f(t)\bigr)\\~\\
\text{Use a function}\\g\text{ to find }y\\\bigl(y=g(t)\bigr)
\end{gathered}
}\quad
\begin{gathered}
\rotatebox{20}{\scalebox{2}{$\searrow$}}\\
\rotatebox{-20}{\scalebox{2}{$\nearrow$}}
\end{gathered}\quad
\begin{gathered}\text{Plot point}\\(x,y)\end{gathered}
\]
to:
\begin{center}
\begin{tikzpicture}[>=latex]
\draw (0,0) node (A) [align=center] {Choose \\$t$} 
    (3,1) node[align=center] (B1) {Use a function\\ $f$ to find $x$\\$\bigl(x=f(t)\bigr)$}
	(3,-1) node[align=center] (B2) {Use a function\\ $g$ to find $y$\\$\bigl(y=g(t)\bigr)$}
	(6.25,0) node [align=center] (C) {Plot point \\ $(x,y)$};
\draw [->](A) --(B1);
\draw [->](A) --(B2);
\draw [->](B1) -- (C);
\draw [->](B2) -- (C);
\end{tikzpicture}
\end{center}

\begin{sectionexercises}
\item Label should have a decimal point.
\end{sectionexercises}
in between
\begin{sectionexercises}
\item Should continue numbering. Label should have a decimal point.
\end{sectionexercises}

% see Eg1.3.8
\begin{equation}\label{eqlabel}
a+b=c\quad\text{my label is \ref{eqlabel}}
\end{equation}

Stuff $\left(\rule{0pt}{30pt}\right)$.

$\underbrace{\makebox[1.8cm]{}}_a$

\tikz{\node{$\underbrace{\makebox[1.8cm]{}}_a$}}

%{\centering \includegraphics[width=1cm]{example-image}\\This box and text should be the only things centered on this page.\\}

%{\centering
%This is the only thing that should be centered.
%}

\begin{multicols}{2}
\begin{enumerate}
\item item one in two columns
\item item two in two columns
\end{enumerate}
\end{multicols}

\begin{gather*}
\mbox{now you see me}\\
\makebox[0pt]{now you still see me}
\end{gather*}

\begin{equation*}
\mbox{now you see me}\qquad
\makebox[0pt][l]{now you still see me}
\end{equation*}

$\mbox{now you see me}\qquad
\makebox[0pt][l]{now you still see me}$

now you see me\qquad
\makebox[0pt][l]{now you still see me}

\noindent
\begin{minipage}{\linewidth}
\noindent
 \parbox{.35\linewidth}{all}%
 \parbox{.2\linewidth}{one}%
 \parbox{.45\linewidth}{line}
\end{minipage}

\noindent
\parbox{.35\linewidth}{all}%
\parbox{.2\linewidth}{one}%
\parbox{.45\linewidth}{line}

\noindent\begin{minipage}{\linewidth}\noindent%
\begin{tabular}{ c c c }
item 1 & item 2 & \multirow{12.6}{*}{item 3 should be at the bottom} \\
% see https://tex.stackexchange.com/a/364935/107497
item 4 & item 5
\end{tabular}\\
My caption
\end{minipage}%

\noindent\begin{minipage}{\linewidth}\noindent%
\begin{tabular}{ c c }
item 6 & \multirow{12.6}{*}{item 7 should be at the bottom} \\
% see https://tex.stackexchange.com/a/364935/107497
item 8
\end{tabular}
\end{minipage}%

\begin{tabular}{cc}
row 1 & \multirow{12.6}{*}{should be at the bottom} \\
row 2
% see https://tex.stackexchange.com/a/364935/107497
\end{tabular}

\end{document}
