% !TEX TS-program = XeLaTeX
% !TEX program = XeLaTeX
%\errorcontextlines 10000

% this is not standalone
% this is latexmlAlts to test if we need alternative latexml commands

\documentclass[10pt]{book}

%\input{headers/APEX_format}
%\usepackage{headers/apex_style}
%\input{headers/Header_Calculus}

% LaTeXML's hyperref overwrites these
\newcommand{\chapterautorefname}{Chap\-ter} % the default is lowercase
\newcommand{\sectionautorefname}{Sec\-tion} % the default is lowercase

\usepackage[marginparwidth=150pt]{geometry}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{enumitem}
\usepackage{multicol}
\usepackage{multirow}
\usepackage[font=small,justification=RaggedRight]{caption}
\usepackage{booktabs}
\usepackage{hyperref}
\newlist{sectionexercises}{enumerate}{1}
\newcounter{saveexercisenum}[section]
\setlist[sectionexercises]{
    label=\arabic*.,
    ref=\arabic*, % ref overrides label
    before=\setcounter{sectionexercisesi}{\value{saveexercisenum}},
    after=\setcounter{saveexercisenum}{\value{sectionexercisesi}},
}

\newcommand{\myincludeasythree}[3]{\includegraphics[#2]{example-image}}

\begin{document}

\pagestyle{empty}

\framebox[.14\linewidth][l]{\parbox{1pt}{Chapter\\\chapterautorefname}}
\framebox[.14\linewidth][l]{\parbox{1pt}{Section\\\sectionautorefname}}
\framebox[.14\linewidth][l]{\parbox{1pt}{150.0pt\\\the\marginparwidth}}

% todo tikz matrix spacing see https://github.com/brucemiller/LaTeXML/issues/794
\noindent before\\
\begin{tikzpicture}
  \matrix[row sep=3mm,column sep=3mm]{
   \node(left){L}; &&&&&& \node(right){R};\\\\\\\\
   \node(bottom){B};\\
  };
  \draw(left)--(right)(left)--(bottom);
\end{tikzpicture}\quad
\begin{tikzpicture}
  \matrix {
    & \node (A) {A}; \\
    \node{B};&& \node(C){C}; \\
  };
  \draw (A.south) -- (A|- C.south);
\end{tikzpicture}\\
after

Compare: % see 09_Parametric_Equations.tex
\[
\begin{gathered}\text{Choose}\\t\end{gathered}\quad
\tikz[>=latex,baseline=(current bounding box.center)]{\draw[->](0,.3)--(1,.6);\draw[->](0,-.3)--(1,-.6);}\quad
{\addtolength{\jot}{-.5ex}
\begin{gathered}
\text{Use a function}\\f\text{ to find }x\\\bigl(x=f(t)\bigr)\\~\\
\text{Use a function}\\g\text{ to find }y\\\bigl(y=g(t)\bigr)
\end{gathered}
}\quad
\tikz[>=latex,baseline=(current bounding box.center)]{\draw[->](0,.6)--(1,.3);\draw[->](0,-.6)--(1,-.3);}\quad
\begin{gathered}\text{Plot point}\\(x,y)\end{gathered}
\]
to:
\[
\begin{gathered}\text{Choose}\\t\end{gathered}\quad
\begin{gathered}
\rotatebox{-20}{\scalebox{2}{$\nearrow$}}\\
\rotatebox{20}{\scalebox{2}{$\searrow$}}
\end{gathered}\quad
{\addtolength{\jot}{-.5ex}
\begin{gathered}
\text{Use a function}\\f\text{ to find }x\\\bigl(x=f(t)\bigr)\\~\\
\text{Use a function}\\g\text{ to find }y\\\bigl(y=g(t)\bigr)
\end{gathered}
}\quad
\begin{gathered}
\rotatebox{20}{\scalebox{2}{$\searrow$}}\\
\rotatebox{-20}{\scalebox{2}{$\nearrow$}}
\end{gathered}\quad
\begin{gathered}\text{Plot point}\\(x,y)\end{gathered}
\]
to:
\begin{center}
\begin{tikzpicture}[>=latex]
\draw (0,0) node (A) [align=center] {Choose \\$t$} 
    (3,1) node[align=center] (B1) {Use a function\\ $f$ to find $x$\\$\bigl(x=f(t)\bigr)$}
	(3,-1) node[align=center] (B2) {Use a function\\ $g$ to find $y$\\$\bigl(y=g(t)\bigr)$}
	(6.25,0) node [align=center] (C) {Plot point \\ $(x,y)$};
\draw [->](A) --(B1);
\draw [->](A) --(B2);
\draw [->](B1) -- (C);
\draw [->](B2) -- (C);
\end{tikzpicture}
\end{center}

\begin{sectionexercises}
\item\label{probone} Label should have a decimal point.
\end{sectionexercises}
in between
\begin{sectionexercises}
\item Should continue numbering. Label should have a decimal point.
\end{sectionexercises}

% see Eg1.3.8
\[a+b=c\quad\text{because \ref{probone}}\]

Stuff $\left(\rule{0pt}{30pt}\right)$.

$\underbrace{\makebox[1.8cm]{}}_a$

\tikz{\node{$\underbrace{\makebox[1.8cm]{}}_a$}}

%{\centering \includegraphics[width=1cm]{example-image}\\This box and text should be the only things centered on this page.\\}

\begin{centering}
This should be centered.\\
\end{centering}
This should not be centered.

\begin{multicols}{2}
\begin{enumerate}
\lxAddClass{twoColumns}
\item\label{thm:d_const_mult_rule} $\frac{d}{d x}\bigl(cf(x) \bigr) = c\cdot f'(x)$
\item\label{thm:d_sum_diff_rule} $\frac{d}{d x}\bigl(f(x)\pm g(x) \bigr) =$ \\
\null\qquad$f'(x)\pm g'(x)$
\item $\frac{d}{d x}\bigl(C \bigr) = 0$
\setcounter{enumi}{0}
\item $\int c\cdot f(x)d x = c\cdot \int f(x)d x$
\item $\int \bigl(f(x)\pm g(x)\bigr)d x =$ \\
\null\qquad$\int f(x)d x\pm \int g(x)d x$
\item $\int 0d x = C$
\end{enumerate}
\end{multicols}

% see F9.10.2
The beginning of a sentence.  $\makebox[0pt][l]{I should appear.}$

\noindent
\begin{minipage}{\linewidth}
 \begin{minipage}{.35\linewidth}
 all
 \end{minipage}%
 \begin{minipage}{.2\linewidth}
 one
 \end{minipage}%
 \begin{minipage}{.45\linewidth}
 line
 \end{minipage}
\end{minipage}

\noindent
\begin{minipage}{\linewidth}
\lxAddClass{oneLine}
 \captionsetup{type=figure}%
 \noindent%
%\ifbool{latexml}{}{
% \begin{minipage}[c]{.24\linewidth}
%}% end bool{latexml}
  \myincludeasythree{width=\linewidth,
3Droll=0,
3Dortho=0.0067,
3Dc2c=.68 .68 .25,
3Dcoo=0 0 0,
3Droo=150}{width=\linewidth}{figures/figquadric_cone_3D}
%\ifbool{latexml}{
\hfill
%}{%
% \end{minipage}%
% \begin{minipage}[c]{.21\linewidth}
%}% end bool{latexml}
  \begin{tabular}{cc}
   \textbf{Plane}  & \textbf{Trace} \\\midrule
   $x=0$ & \parbox{5em}{\centering Crossed\\[-.4\baselineskip]Lines}\medskip\\
   $y=0$ & \parbox{5em}{\centering Crossed\\[-.4\baselineskip]Lines}\bigskip\\
   $x=d$ & Hyperbola\\
   $y=d$ & Hyperbola\\
   $z=d$ & Ellipse
  \end{tabular}
%\ifbool{latexml}{
\hfill
%}{%
% \end{minipage}%
% \begin{minipage}[c]{.55\linewidth}
%}% end bool{latexml}
  \myincludeasythree{width=.8\marginparwidth,
3Droll=0,
3Dortho=0.0067,
3Dc2c=.68 .68 .25,
3Dcoo=0 0 0,
3Droo=150}{width=.8\marginparwidth}{figures/figquadric_coneb_3D}
~%
  \myincludeasythree{width=.8\marginparwidth,
3Droll=0,
3Dortho=0.0067,
3Dc2c=.68 .68 .25,
3Dcoo=0 0 0,
3Droo=150}{width=.8\marginparwidth}{figures/figquadric_conec_3D}
%\ifbool{latexml}{}{%
% \end{minipage}
%}% end bool{latexml}
 \caption{\quad\textbf{Elliptic Cone}\qquad$z^2=\dfrac{x^2}{a^2}+\dfrac{y^2}{b^2}$}
 \label{fig_elliptic_cone}
 \bigskip
 \begin{minipage}{.75\linewidth}
  One can rewrite the equation as $z^2-x^2/a^2-y^2/{b^2} = 0$. The one variable with a positive coefficient corresponds to the axis that the cones ``open'' along. \index{quadric surface!elliptic cone}
 \end{minipage}
\end{minipage}

\begin{tabular}{cc}
row 1 & \multirow{15}{*}{should be at the bottom} \\
row 2
% see https://tex.stackexchange.com/a/364935/107497
\end{tabular}

\end{document}
