\section{The Chain Rule}\label{sec:chainrule}

We have covered almost all of the derivative rules that deal with combinations of two (or more) functions.  The operations of addition, subtraction, multiplication (including by a constant) and division led to the Sum and Difference rules, the Constant Multiple Rule, the Power Rule, the Product Rule and the Quotient Rule.  %As a nice subcase of the Product Rule, we also have the Power Rule (which we will generalize in this section).  
To complete the list of differentiation rules, we look at the last way two (or more) functions can be combined: the process of composition (i.e. one function ``inside''  another).

One example of a composition of functions is $f(x) = \cos(x^2)$. We currently do not know how to compute this derivative. If forced to guess, one would likely guess $\fp(x) = -\sin(2x)$, where we recognize $-\sin x$ as the derivative of $\cos x$ and $2x$ as the derivative of $x^2$. However, this is not the case; $\fp(x)\neq -\sin(2x)$. In \autoref{ex_chain7} we'll see the correct answer, which employs the new rule this section introduces, the \textbf{Chain Rule}. 

Before we define this new rule, recall the notation for composition of functions. We write $(f \circ g)(x)$ or $f(g(x))$, read as ``$f$ of $g$ of $x$,'' to denote composing $f$ with $g$.  In shorthand, we simply write
$f \circ g$ or $f(g)$ and read it as ``$f$ of $g$.''  Before giving the corresponding differentiation rule, we note that the rule extends to multiple compositions like $f(g(h(x)))$ or $f(g(h(j(x))))$, etc.

To motivate the rule, let's look at three derivatives we can already compute.

\begin{example}[Exploring similar derivatives]\label{ex_chain1}%
Find the derivatives of $F_1(x) = (1-x)^2$, $F_2(x) = (1-x)^3,$ and $F_3(x) = (1-x)^4.$ (We'll see later why we are using subscripts for different functions and an uppercase $F$.)
\solution
In order to use the rules we already have, we must first expand each function as
$F_1(x) = 1 - 2x + x^2$,  $F_2(x) = 1 - 3x + 3x^2 - x^3$ and $F_3(x) = 1 - 4x + 6x^2 - 4x^3 + x^4$.
  
It is not hard to see that:
\begin{align*}
F_1\primeskip'(x) &= -2 + 2x,\\
F_2\primeskip'(x) &= -3 + 6x - 3x^2\qquad\text{and}\\
F_3\primeskip'(x) &= -4 + 12x - 12x^2 + 4x^3.
\end{align*}
An interesting fact is that these can be rewritten as
\begin{align*}
F_1\primeskip'(x) &= -2(1-x),\\
F_2\primeskip'(x) &= -3(1-x)^2\qquad\text{and} \\
F_3\primeskip'(x) &= -4(1-x)^3.
\end{align*}
%\[
%F_1\primeskip'(x) = -2(1-x),\quad
%F_2\primeskip'(x) = -3(1-x)^2\ \textrm{ and } \ 
%F_3\primeskip'(x) = -4(1-x)^3.
%\]
A pattern might jump out at you.  Recognize that each of these functions is a composition, letting $g(x) = 1-x$:
\begin{align*}
F_1(x) &= f_1(g(x)), \text{ where } f_1(x) = x^2,\\
F_2(x) &= f_2(g(x)), \text{ where } f_2(x) = x^3,\\
F_3(x) &= f_3(g(x)), \text{ where } f_3(x) = x^4.
\end{align*}

We'll come back to this example after giving the formal statements of the Chain Rule; for now, we are just illustrating a pattern.
\end{example}

\begin{theorem}[The Chain Rule]\label{thm:chain_rule}%
Let $y = f(u)$ be a differentiable function of $u$ and let $u = g(x)$ be a differentiable function of $x$.\index{derivative!Chain Rule}\index{Chain Rule} Then $y=f(g(x))$ is a differentiable function of $x$, and \[y\primeskip' = \fp(g(x))\cdot g\primeskip'(x).\]
\end{theorem}

We can think of this as taking the derivative of the outer function evaluated at the inner function times the derivative of the inner function. To help  understand the Chain Rule, we return to \autoref{ex_chain1}.

\begin{example}[Using the Chain Rule]\label{ex_chain2}%
Use the Chain Rule to find the derivatives of the functions given in \autoref{ex_chain1}.
\solution
\autoref{ex_chain1} ended with the recognition that each of the given functions was actually a composition of functions. To avoid confusion, we ignore most of the subscripts here.

\noindent $F_1(x) = (1-x)^2:$\\
\indent We found that
\[y=(1-x)^2 = f(g(x)), \text{ where } f(x) = x^2\ \text{ and }\ g(x) = 1-x.\]
To find $y\primeskip'$, we apply the Chain Rule. We need $\fp(x)=2x$ and $g\primeskip'(x)=-1.$

Part of the Chain Rule uses $\fp(g(x))$. This means substitute $g(x)$ for $x$ in the equation for $\fp(x)$. That is, $\fp(x) = 2(1-x)$.  Finishing out the Chain Rule we have
\[y\primeskip' = \fp(g(x))\cdot g\primeskip'(x) = 2(1-x)\cdot (-1) = -2(1-x)= 2x-2.\]

\noindent $F_2(x) = (1-x)^3$:\\
\indent Let $y = (1-x)^3 = f(g(x))$, where $f(x) = x^3$ and $g(x) = (1-x)$. We have $\fp(x) = 3x^2$, so $\fp(g(x)) = 3(1-x)^2$. The Chain Rule then states
\[y\primeskip' = \fp(g(x))\cdot g\primeskip'(x) = 3(1-x)^2\cdot(-1) = -3(1-x)^2.\]

\noindent $F_3(x) = (1-x)^4$:\\
\indent Finally, when $y = (1-x)^4$, we have $f(x)= x^4$ and $g(x) = (1-x)$. Thus $\fp(x) = 4x^3$ and $\fp(g(x)) = 4(1-x)^3$. Thus
\[y\primeskip' = \fp(g(x))\cdot g\primeskip'(x) = 4(1-x)^3\cdot (-1) = -4(1-x)^3.\]
\end{example}

\autoref{ex_chain2} demonstrated a particular pattern: when $f(x)=x^n$ and $y=f(g(x))$, then $y\primeskip' =n\cdot (g(x))^{n-1}\cdot g\primeskip'(x)$. This  is called the Generalized Power Rule.

\begin{theorem}[Generalized Power Rule]\label{thm:gen_power_rule}%
Let $g(x)$ be a differentiable function.\index{derivative!Generalized Power Rule}\index{Generalized Power Rule} Then
\[\frac{\dd}{\dd x}\Bigl(g(x)^n\Bigr) = n\cdot \bigl(g(x)\bigr)^{n-1}\cdot g\primeskip'(x).\]
\end{theorem}

This allows us to quickly find the derivative of functions like $y = (3x^2-5x+7+\sin x)^{20}$. While it may look intimidating, the Generalized Power Rule states that
\begin{align*}
y\primeskip'
&= 20(3x^2 -5x +7 + \sin x)^{19} \cdot  \frac{\dd}{\dd x} (3x^2 -5x +7 + \sin x)\\
&= 20(3x^2-5x+7+\sin x)^{19}\cdot (6x-5+\cos x).
\end{align*}

Treat the derivative-taking process step-by-step. In the example just given, first multiply by 20, then rewrite the inside of the parentheses, raising it all to the 19$^{\text{th}}$ power. Then think about the derivative of the expression inside the parentheses, and multiply by that.

\youtubeVideo{6kScLENCXLg}{Chain Rule for Finding Derivatives}

We now consider more examples that employ the Chain Rule.

\begin{example}[Using the Chain Rule]\label{ex_chain3}%
Find the derivatives of the following functions:
\[
 1.\quad y = \sin{2x}\qquad\qquad
 2.\quad y= \ln (4x^3-2x^2)\qquad\qquad
 3.\quad y = e^{-x^2}
\]
\solution
\begin{enumerate}
	\item	Consider $y = \sin 2x$. Recognize that this is a composition of functions, where $f(x) = \sin x$ and $g(x) = 2x$. Thus
	\[
	 y\primeskip' = \fp(g(x))\cdot g\primeskip'(x)
	 =\cos (2x) \cdot \frac{\dd}{\dd x}(2x)= \cos (2x)\cdot 2 = 2\cos 2x.
	\]
	\item	Recognize that $y = \ln (4x^3-2x^2)$ is the composition of $f(x) = \ln x$ and $g(x) = 4x^3-2x^2$. Also, recall that
	\[\frac{\dd}{\dd x}\Bigl(\ln x\Bigr) = \frac{1}{x}.\]
	This leads us to:
	\begin{align*}
	 y\primeskip'
	 & = \frac{1}{4x^3-2x^2} \cdot \frac{\dd}{\dd x} (4x^3-2x^2) \\
	 & = \frac{1}{4x^3-2x^2} \cdot (12x^2-4x) \\
	 & = \frac{12x^2-4x}{4x^3-2x^2} \\
	 & = \frac{4x(3x-1)}{2x(2x^2-x)} \\
	 & = \frac{2(3x-1)}{2x^2-x}.
	\end{align*}
	\item	Recognize  that $y = e^{-x^2}$ is the composition of $f(x) = e^x$ and $g(x) = -x^2$. Remembering that $\fp(x) = e^x$, we have
	\[
	 y\primeskip'=e^{x^2}\cdot\frac{\dd}{\dd x}(x^2)=e^{-x^2}\cdot(-2x)=(-2x)e^{-x^2}.
	\]
\end{enumerate}
\end{example}

\begin{example}[Using the Chain Rule to find a tangent line]\label{ex_chain7}%
Let $f(x) = \cos x^2$. Find the equation of the line tangent to the graph of $f$ at $x=1$.
\solution
The tangent line goes through the point $(1,f(1)) \approx (1,0.54)$ with slope $\fp(1)$. To find $\fp$, we need the Chain Rule.

$\fp(x) = -\sin(x^2) \cdot(2x) = -2x\sin x^2$. Evaluated at $x=1$, we have $\fp(1) = -2\sin 1\approx -1.68$. Thus the equation of the tangent line is approximately
%
\mtable{$f(x) = \cos x^2$ sketched along with its tangent line at $x=1$.}{fig:chain7}{\begin{tikzpicture}[alt={The curve begins near (-3,-1), rises quickly to (-2.5,1), falls quickly to (-1.8,-1), rises to flatten out near (0,1), and then repeats the process reflected across the y axis.  The line tangent near (1,0.5) is steep.}]
\begin{axis}[width=1.16\marginparwidth,height=1.16\marginparwidth,tick label style={font=\scriptsize},minor x tick num=1,minor y tick num=1,axis y line=middle,axis x line=middle,ymin=-1.1,ymax=1.1,xmin=-3.1,xmax=3.1,name=myplot]
\addplot [draw={\colorone},smooth,thick,domain=-3.14:3.14,samples=60] {cos(deg(x*x))};
\addplot [draw={\colortwo},smooth,thick,domain=.1:1.9] {-1.68*(x-1)+0.54};
\end{axis}
\node [right] at (myplot.right of origin) {\scriptsize $x$};
\node [above] at (myplot.above origin) {\scriptsize $y$};
\end{tikzpicture}}
%
\[y = -1.68(x-1)+0.54.\]

The tangent line is sketched along with $f$ in \autoref{fig:chain7}.
\end{example}

The Chain Rule is used often in taking derivatives. Because of this, one can become familiar with the basic process and learn  patterns that facilitate finding derivatives quickly. For instance,
\[
 \frac{\dd}{\dd x}\Bigl(\ln (\text{anything})\Bigr)
 = \frac{1}{\text{anything}}\cdot\frac{\dd}{\dd x}(\text{anything})
 = \frac{\frac{\dd}{\dd x}(\text{anything})}{\text{anything}}.
\]
A concrete example of this is
\[
\frac{\dd}{\dd x}\Bigl(\ln(3x^{15}-\cos x+e^x)\Bigr)
= \frac{45x^{14}+\sin x+e^x}{3x^{15}-\cos x+e^x}.
\]
While the derivative may  look intimidating at first, look for the pattern. The denominator is the same as what was inside the natural log function; the  numerator is simply its derivative.

This pattern recognition process can be applied to lots of functions. In general, instead of writing ``anything'', we use $u$ as a generic function of $x$. We then say \[\frac{\dd}{\dd x}\Bigl(\ln u\Bigr) = \frac{u\primeskip'}{u}.\]
The following is a short list of how the Chain Rule can be quickly applied to familiar functions.

\begin{multicols}{2}
\begin{enumerate}\lxAddClass{columns2}
	\item	$\ds\frac{\dd}{\dd x}\Bigl(u^n\Bigr) = n\cdot u^{n-1}\cdot u\primeskip'.$
	\item	$\ds\frac{\dd}{\dd x}\Bigl(e^u\Bigr) = u\primeskip'\cdot e^u.$
	\item	$\ds\frac{\dd}{\dd x}\Bigl(\sin u\Bigr) = u\primeskip'\cdot \cos u.$
	\item	$\ds\frac{\dd}{\dd x}\Bigl(\cos u\Bigr) = -u\primeskip'\cdot \sin u.$
	\item	$\ds\frac{\dd}{\dd x}\Bigl(\tan u\Bigr) = u\primeskip'\cdot \sec^2 u.$
	\item[]\bigskip
\end{enumerate}
\end{multicols}

Of course, the Chain Rule can be applied in conjunction with any of the other rules we have already learned. We practice this next.

\begin{example}[Using the Product, Quotient and Chain Rules]\label{ex_chain4}%
Find the derivatives of the following functions.
\[
 1.\quad f(x) = x^5 \sin{2x^3} \qquad\qquad 2.\quad f(x) = \dfrac{5x^3}{e^{-x^2}}.
\]
\solution
\begin{enumerate}
\item	We must use the Product and Chain Rules. Do not think that you must be able to ``see'' the whole answer immediately; rather, just proceed step-by-step.
\begin{align*}
 \fp(x)
 &= x^5 \cdot \frac{\dd}{\dd x}(\sin 2x^3) + \frac{\dd}{\dd x}(x^5) \cdot \sin 2x^3\\
 &= x^5 \cdot [\cos 2x^3 \cdot \frac{\dd}{\dd x}(2x^3)] + 5x^4 \cdot \sin 2x^3\\
 &= x^5\bigl(6x^2\cos 2x^3\bigr) + 5x^4\bigl(\sin 2x^3\bigr)\\
 &= 6x^7\cos2x^3+5x^4\sin 2x^3.
\end{align*}
\item	We must employ the Quotient Rule along with the Chain Rule. Again, proceed step-by-step.
\begin{align*}
 \fp(x)
 &= \frac{e^{-x^2} \cdot \frac{\dd}{\dd x}(5x^3) - 5x^3\frac{\dd}{\dd x}e^{-x^2}}{(e^{-x^2})^2}\\
 &= \frac{e^{-x^2} \cdot 15x^2 - 5x^3 \cdot e^{-x^2} \cdot \frac{\dd}{\dd x}(-x^2)}{(e^{-x^2})^2}\\
 &= \frac{e^{-x^2}\bigl(15x^2\bigr) - 5x^3\bigl((-2x)e^{-x^2}\bigr)}{\bigl(e^{-x^2}\bigr)^2}\\
 &=\frac{e^{-x^2}\bigl(10x^4+15x^2\bigr)}{e^{-2x^2}}\\
 &= e^{x^2}\bigl(10x^4+15x^2\bigr).
\end{align*}
\end{enumerate}
\end{example}

A key to correctly working these problems is to break the problem down into smaller, more manageable pieces. For instance, when using the Product and Chain Rules together, just consider the first part of the Product Rule at first: $f(x)g\primeskip'(x)$. Just rewrite $f(x)$, then find $g\primeskip'(x)$. Then move on to the $\fp(x)g(x)$ part. Don't attempt to figure out both parts at once.

Likewise, using the Quotient Rule, approach the numerator in two steps and handle the denominator after completing that. Only simplify afterward.

We can also employ the Chain Rule itself several times, as shown in the next example.

\begin{example}[Using the Chain Rule multiple times]\label{ex_chain6}%
Find the derivative of $y = \tan^5(6x^3-7x)$.
\solution
Recognize that we have the function $g(x)=\tan(6x^3-7x)$ ``inside'' the function $f(x) = x^5$; that is, we have $y=\left(\tan(6x^3-7x)\right)^5$. We use the Chain Rule multiple times, beginning with the Generalized Power Rule:
\begin{align*}
y\primeskip' &= 5\left(\tan(6x^3-7x)\right)^4 \cdot \frac{\dd}{\dd x} \tan(6x^3-7x)\\
&= 5\tan^4(6x^3-7x) \cdot \sec^2 (6x^3-7x) \cdot \frac{\dd}{\dd x}(6x^3-7x) \\
&= 5\tan^4 (6x^3-7x) \cdot \sec^2 (6x^3-7x) \cdot (18x^2-7)\\
&= 5(18x^2-7)\tan^4 (6x^3-7x) \sec^2 (6x^3-7x) \\
\end{align*}

This function is frankly a ridiculous function, possessing no real practical value. It is very difficult to graph, as the tangent function has many vertical asymptotes and $6x^3-7x$ grows so very fast. The important thing to learn from this is that the derivative can be found. In fact, it is not ``hard;'' one must take several small steps and be careful to keep track of how to apply each of these steps.%However, just to demonstrate that this is the proper derivative, we have plotted the tangent line to the function, along with $y$, in FIGURE. The derivative gives the correct slope.
%Do for x=.05
\end{example}

It is a traditional mathematical exercise to find the derivatives of arbitrarily complicated functions just to demonstrate that it \emph{can be done}. Just break everything down into smaller pieces.

%We note that these functions (which look similar to those in the previous example) may arise in dealing with a Fourier transform or a Fourier series (perhaps in a differential equations or circuits class).  They are more complicated, because you do not use the chain rule immediately.  You must first use a previous rule, namely the product rule.  However, within the calculations, you will have to involve the chain rule.**   \\

\begin{example}[Using the Product, Quotient and Chain Rules]\label{ex_chain5}%
Find the derivative of $f(x)=\dfrac{x\cos(x^{-2})-\sin^2(e^{4x})}{\ln x^2}$.
\solution
This function likely has no practical use outside of demonstrating derivative skills. The answer is given below without simplification. It employs the Quotient Rule, the Product Rule, and the Chain Rule three times.\\
\scriptsize
$\fp(x) = $
%\flushinner{%
\[
 \dfrac{(\ln x^2)[-x(\sin x^{-2})(-2x^{-3}) + 1\cdot (\cos (x^{-2})) -2 \sin e^{4x} \cos e^{4x} \cdot (4e^{4x})] - \frac{2x}{x^2} \cdot [x\cos (x^{-2}) -\sin^2(e^{4x})]}
 {(\ln x^2)^2}.
\]%}
\normalsize

The reader is highly encouraged to look at each term and recognize why it is there. %(I.e., the Quotient Rule is used; in the numerator, identify the ``LOdHI'' term, etc.)
This example demonstrates that derivatives can be computed systematically, no matter how arbitrarily complicated the function is.
\end{example}

%------------------------\\
%FOOTNOTE **: Most derivatives will use a combination of the derivative rules.  For kicks, have a shot at finding the derivative of
%\[
%F(x) = \frac{x\cos(x^{-2})-\sin^2(e^{4x})}{\ln(x^2+5x^4)}
%\]
%you will never come across this function in practice (or at least we hope not!), but it does involve the constant multiple, sum, difference, product, quotient and chain rules all at once (and a healthy dose of transcendental functions).  Here's the answer: $<$solution redacted - blame the lawyers$>$.\\
%------------------------\\
%\\
%Using the product rule, we can see that 
%\begin{eqnarray*}
%A^{\, \prime}(x) &= &1 \cdot \sin{2x} + x \cdot (\sin{2x})^{\prime},\\
%B^{\, \prime}(x) &=& 1 \cdot e^{3x} + x \cdot (e^{3x})^{\prime},\\
%C^{\, \prime}(x) &=& 15x^2 \cdot e^{-x^2}  +  5x^3 \cdot (e^{-x^2})^{\prime}.
%\end{eqnarray*}
%To complete the calculation, instead of reapplying the chain rule here, we use the results in the previous example to get
%\begin{eqnarray*}
%A^{\, \prime}(x) &= &1 \cdot \sin{2x} + x \cdot 2\cos{2x},\\
%B^{\, \prime}(x) &=& 1 \cdot e^{3x} + x \cdot 3e^{3x},\\
%C^{\, \prime}(x) &=& 15x^2 \cdot e^{-x^2}  +  5x^3 \cdot -2x e^{-x^2}.
%\end{eqnarray*}
%or
%\begin{eqnarray*}
%A^{\, \prime}(x) &=& \sin{2x} + 2x \cos{2x},\\
%B^{\, \prime}(x) &=&  e^{3x} + 3x e^{3x},\\
%C^{\, \prime}(x) &=& 15x^2 e^{-x^2}  -  10x^4 e^{-x^2}.
%\end{eqnarray*}
%If you wish, you can simplify the second two as $B^{\, \prime}(x) =  e^{3x}(1 + 3x)$ and 
%$C^{\, \prime}(x) = e^{-x^2}(15x^2  -  10x^4)$.  We probably would make these simplifications because they look nicer, they are easer to calculate with, and it is easier to take further derivatives as necessary.\\
%\\


% this is covered in Calc 2

%The Chain Rule also has theoretic value. That is, it can be used to find the derivatives of functions that we have not yet learned as we do in the following example.
%
%\begin{example}[The Chain Rule and exponential functions]\label{ex_chain8}%
%Use the Chain Rule to find the derivative of $y= a^x$ where $a>0$, $a\neq 1$ is constant.
%\solution
%We only know how to find the derivative of one exponential function: $y = e^x$; this problem is asking us to find the derivative of functions such as $y = 2^x$. 
%
%This can be accomplished by rewriting $a^x$ in terms of $e$.  Recalling that $e^x$ and $\ln x$ are inverse functions, we can write
%\[a = e^{\ln a} \qquad \text{and so} \qquad y = a^x = e^{\ln (a^x)}.\]
%
%By the exponent property of logarithms, we can ``bring down'' the power to get 
%\[y = a^x = e^{x (\ln a)}.\]
%
%The function is now the composition $y=f(g(x))$, with $f(x) = e^x$ and $g(x) = x(\ln a)$.  Since $\fp(x) = e^x$ and $g\primeskip'(x) = \ln a$, the Chain Rule  gives 
%\[y\primeskip' = e^{x (\ln a)} \cdot \ln a.\]
%Recall that the $e^{x(\ln a)}$ term on the right hand side is just $a^x$, our original function. Thus, the derivative contains the original function itself. We have
%\[y\primeskip' = y \cdot \ln a = a^x\cdot \ln a.\]
%The Chain Rule, coupled with the derivative rule of $e^x$, allows us to find the derivatives of all exponential functions.
%\end{example}
%
%The previous example produced a result worthy of its own ``box.''
%
%\begin{theorem}[Derivatives of Exponential Functions]\label{thm:exponentials}%
%Let $f(x)=a^x$, for $a>0, a\neq 1$.\index{derivative!exponential functions} Then $f$ is differentiable for all real numbers and \[\fp(x) = \ln a\cdot a^x.\]
%\end{theorem}

%% possibly end the move to Calc 2 part, the below was originally commented out

%{\bf Hard Examples:} For constants $a$ and $\nu,$ find the derivatives of 
%\begin{eqnarray*}
%y(x) &=& a\ln\left(\frac{a+\sqrt{a^2-x^2}}{x}\right) - \sqrt{a^2-x^2}\\
%f(t) &=& \frac{\Gamma(\frac{\nu + 1}{2})}{\sqrt{\nu \pi} \Gamma(\frac{\nu}{2})}
%\left(1+\frac{t^2}{\nu}\right)^{-\frac{\nu+1}{2}}, \\
%E(x) &=& \frac{2}{\sqrt{\pi}}\int_0^{\frac{x}{\sqrt{2}}} e^{\frac{-t^2}{2}} \dd t
%\end{eqnarray*}
%where $y$ is the equation of a tractrix (important in the study of a certain motion), $f$ is the probability density function of the student's $t$-distribution (in statistics) and $E$ is related to the error function, which is defined as
%erf$\displaystyle (x) = \frac{2}{\sqrt{\pi}}\int_0^x e^{\frac{-t^2}{2}} \dd t$, and to the normal cummulative distribution 
%$\Phi(x) = \frac{1}{2} \left[ 1 + \textrm{erf}\left(\frac{x}{\sqrt{2}}  \right)\right]$  ***.  \\
%\\
%------------------------\\
%FOOTNOTE ***: 
%Yes, feel free to Google these functions and plot them on WolframAlpha - we would!\\
%------------------------\\
%\\
%To compute the derivative of $y(x)$, rewrite it as
%\[
%y(x) = a\ln\left(\frac{a+(a^2-x^2)^{\frac{1}{2}}}{x}\right) - (a^2-x^2)^\frac{1}{2}
%\]
%and use the constant multiple, chain, and quotient rules:
%\[
%y^{\, \prime}(x) 
%= 
%a\left(\frac{x}{a+(a^2-x^2)^{\frac{1}{2}}}\right)
%\cdot
%\frac{1}{2} (a^2-x^2)^{-\frac{1}{2}} \cdot (-2x)
%- 
%\frac{1}{2} (a^2-x^2)^{-\frac{1}{2}} \cdot (-2x).
%\]
%With a little algebra, this simplifies to
%\[
%y^{\, \prime}(x) 
%= 
%-\frac{a\sqrt{a^2-x^2}+a^2-x^2}{x\sqrt{a^2-x^2}+ax}.
%\]
%The derivative of $f(t)$ isn't actually too bad, since the leading fraction is a constant, so we only need to use the constant multiple and chain rules:
%\[
%f^{\, \prime}(t) 
%= 
%\frac{\Gamma(\frac{\nu + 1}{2})}{\sqrt{\nu \pi} \Gamma(\frac{\nu}{2})}
%\cdot
%\left(-\frac{\nu+1}{2}\right)
%\left(1+\frac{t^2}{\nu}\right)^{-\frac{\nu+3}{2}}
%\cdot
%\frac{2t}{\nu}
%=
%-\frac{\Gamma(\frac{\nu + 1}{2})}{\sqrt{\nu \pi} \Gamma(\frac{\nu}{2})}
%\left(\frac{\nu+1}{\nu}\right)
%\cdot
%t\left(1+\frac{t^2}{\nu}\right)^{-\frac{\nu+3}{2}}.
%\]
%The derivative of $E(x)$ primarily uses the 1st Fundamental Theorem of Calculus as well as the chain rule
%\[
%E^{\, \prime}(x) 
%= 
%\frac{2}{\sqrt{\pi}} e^{\frac{-\left(\frac{x}{\sqrt{2}}\right)^2}{2}} 
%\cdot
%\frac{1}{\sqrt{2}}
%=
%\sqrt{\frac{2}{\pi}} \, e^{\frac{-x^2}{4}}. 
%\]

% definitely end the move to Calc 2 part

% do we want x^2 sin(1/x) as an example of a differentiable function whose derivative isn't continuous ? no

\subsection{Alternate Chain Rule Notation}

It is instructive to understand what the  Chain Rule ``looks like'' using ``$\frac{\dd y}{\dd x}$'' notation instead of $y\primeskip'$ notation.  Suppose that $y=f(u)$ is a function of $u$, where $u=g(x)$ is a function of $x$, as stated in \autoref{thm:chain_rule}.  Then, through the composition $f \circ g$, we can think of $y$ as a function of $x$, as $y=f(g(x))$. Thus the derivative of $y$ with respect to $x$ makes sense; we can talk about $\frac{\dd y}{\dd x}.$  This leads to an interesting progression of notation:\index{Chain Rule!notation}\index{derivative!Chain Rule}

\begin{align*}
 y\primeskip'
 &= \fp(g(x))\cdot g\primeskip'(x) \\
 \frac{\dd y}{\dd x} &= y\primeskip'(u) \cdot u\primeskip'(x)
 &&\text{\small (since $y=f(u)$ and $u=g(x)$)}\\
 \frac{\dd y}{\dd x} &= \frac{\dd y}{\dd u} \cdot \frac{\dd u}{\dd x}
 &&\text{\small (using ``fractional'' notation for the derivative)}
\end{align*}

%Using the previous notation, this would be written as $y^{\, \prime}(x(t)) \cdot x^{\, \prime}(t)$, but it makes more sense to write
%\[
%\frac{\dd y}{\dd t} = \frac{\dd y}{\dd x} \cdot \frac{\dd x}{\dd t}.
%\]

Here the ``fractional'' aspect of the derivative notation stands out. On the right hand side, it seems as though the ``$\dd u$'' terms divide out, leaving
\[\frac{\dd y}{\dd x} = \frac{\dd y}{\dd x}.\]
It is important to realize that we \emph{are not} dividing these terms; the derivative notation of $\frac{\dd y}{\dd x}$ is one symbol. It is equally important to realize that this notation was chosen precisely because of this behavior. It makes applying the Chain Rule easy with multiple variables. For instance,
%
%If you look at it like a fraction it sort of looks like the $\dd x$ part ``divides out'' leaving $\displaystyle \frac{\dd y}{\dd t}.$  This isn't quite right, but it does work.  In fact you can extend this as
\[
 \frac{\dd y}{\dd t}
 =\frac{\dd y}{\dd\Box}\cdot\frac{\dd\Box}{\dd\triangle}\cdot\frac{\dd\triangle}{\dd t}.
\]
where $\Box$ and $\triangle$ are any variables you'd like to use.

%After a while, you get better at recognizing the pattern and may take the short cut of not actually writing down the functions that make up the composition when you apply the Chain Rule.  We simply recommend caution and point out that's where errors in work can (and often do) occur.\bigskip

\mtable[-.5in]{A series of gears to demonstrate the Chain Rule. Note how $\frac{\dd y}{\dd x} = \frac{\dd y}{\dd u}\cdot\frac{\dd u}{\dd x}$}{fig:chainrulegears}{\begin{tikzpicture}[alt={A large gear labeled x is twice as big as a medium sized gear labeled u, which is in turn three times as big as a small gear labeled y.},>=latex,scale=.8]
\begin{scope}[shift={(0,-200pt)}]
\begin{scope}
\foreach \x in {0,1,2,...,35} {
 \draw [rotate around={{\x*10}:(0,0)}] (60pt,0)--(65pt,0) arc (0:{4.}:65pt);
 \draw [rotate around={{\x*10+4.}:(0,0)}] (65pt,0) -- (60pt,0) arc (0:6:60pt);
}
\draw [->] (40pt,0) arc (0:170:40pt);
\draw (0,0) node {$x$};
\end{scope}
\begin{scope}[shift={(4.5pt,-99pt)}]
\foreach \x in {0,1,2,...,17} {
 \draw [rotate around={{\x*20}:(0,0)}] (30pt,0)--(35pt,0) arc (0:{9}:35pt);
 \draw [rotate around={{\x*20+9}:(0,0)}] (35pt,0) -- (30pt,0) arc (0:11:30pt);
}
\draw [->] (0,25pt) arc (90:-80:25pt);
\draw (0,0) node {$u$};
\draw (45pt,-30pt) node {\small$\ds \frac{\dd y}{\dd u} = 3$};
\draw (-50pt,30pt) node {\small $\ds \frac{\dd u}{\dd x} = 2$};
\draw (60pt,40pt) node {\small $\ds \frac{\dd y}{\dd x} = 6$};
\end{scope}
\begin{scope}[shift={(53.5pt,-100pt)}]
\foreach \x in {0,1,2,...,5} {
 \draw [rotate around={{\x*60}:(0,0)}] (10pt,0)--(15pt,0) arc (0:{29}:15pt);
 \draw [rotate around={{\x*60+29}:(0,0)}] (15pt,0) -- (10pt,0) arc (0:31:10pt);
}
\draw [->] (0,-20pt) arc (-90:70:20pt);
\draw (0,0) node {$y$};
\end{scope}
\end{scope}
\end{tikzpicture}}
%
One of the most common ways of ``visualizing'' the Chain Rule is to consider a set of gears, as shown in \autoref{fig:chainrulegears}. The gears have 36, 18, and 6 teeth, respectively. That means for every revolution of the $x$ gear, the $u$ gear revolves twice. That is, the rate at which the $u$ gear makes a revolution is twice as fast as the rate at which the $x$ gear makes a revolution. Using the terminology of calculus, the rate of $u$-change, with respect to $x$, is $\frac{\dd u}{\dd x} = 2$. 

Likewise, every revolution of $u$ causes 3 revolutions of $y$: $\frac{\dd y}{\dd u} = 3$. How does $y$ change with respect to $x$? For each revolution of $x$, $y$ revolves 6 times; that is,
\[\frac{\dd y}{\dd x} = \frac{\dd y}{\dd u}\cdot \frac{\dd u}{\dd x} = 2\cdot 3 = 6.\]
We can then extend the Chain Rule with more variables by adding more gears to the picture.\bigskip

It is difficult to overstate the importance of the Chain Rule. So often the functions that we deal with are compositions of two or more functions, requiring us to use this rule to compute derivatives. It is often used in practice when actual functions are unknown. Rather, through measurement, we can calculate $\frac{\dd y}{\dd u}$ and $\frac{\dd u}{\dd x}$. With our knowledge of the Chain Rule, finding $\frac{\dd y}{\dd x}$ is straightforward. 

In the next section, we use the Chain Rule to justify another differentiation technique. There are many curves that we can draw in the plane that fail the ``vertical line test.'' For instance, consider $x^2+y^2=1$, which describes the unit circle. We may still be interested in finding slopes of tangent lines to the circle at various points. The next section shows how we can find $\frac{\dd y}{\dd x}$ without first ``solving for $y$.'' While we can in this instance, in many other instances solving for $y$ is impossible. In these situations, \emph{implicit differentiation} is indispensable. 


\printexercises{exercises/02-05-exercises}
