\section{Extreme Values}\label{sec:multi_extreme_values}

Given a function $z=f(x,y)$, we are often interested in points where $z$ takes on the largest or smallest values. For instance, if $z$ represents a cost function, we would likely want to know what $(x,y)$ values minimize the cost. If $z$ represents the ratio of a volume to surface area, we would likely want to know where $z$ is greatest. This leads to the following definition.

\begin{definition}[Relative and Absolute Extrema]\label{def:multi_extrema}
Let $z=f(x,y)$ be defined on a set $S$ containing the point $P=(x_0,y_0)$.
\index{maximum!relative/local}\index{minimum!relative/local}\index{extrema!relative}
\index{extrema!absolute}\index{maximum!absolute}\index{minimum!absolute}
\begin{enumerate}
	\item If there is an open disk $D$ so that $S$ contains $D$ which contains $P$ and $f(x_0,y_0) \geq f(x,y)$ for all $(x,y)$ in $D$, then $f$ has a \textbf{relative maximum} at $P$; if $f(x_0,y_0) \leq f(x,y)$ for all $(x,y)$ in $D$, then $f$ has a \textbf{relative minimum} at $P$.
	
	\item	If $f(x_0,y_0)\geq f(x,y)$ for all $(x,y)$ in $S$, then $f$ has an \textbf{absolute maximum} at $P$; if $f(x_0,y_0)\leq f(x,y)$ for all $(x,y)$ in $S$, then $f$ has an \textbf{absolute minimum} at $P$.
	
	\item		If $f$ has a relative maximum or minimum at $P$, then $f$ has a \textbf{relative extremum} at $P$; if $f$ has an absolute maximum or minimum at $P$, then $f$ has an \textbf{absolute extremum} at $P$.
\end{enumerate}
\end{definition}

If $f$ has a relative or absolute maximum at $P=(x_0,y_0)$, it means every curve on the surface of $f$ through $P$ will also have a relative or absolute maximum at $P$. Recalling what we learned in \autoref{sec:extreme_values}, the slopes of the tangent lines to these curves at $P$ must be 0 or undefined. Since directional derivatives are computed using $f_x$ and $f_y$, we are led to the following definition and theorem.

\begin{definition}[Critical Point]\label{def:multi_critical_point}
Let $z = f(x,y)$ be continuous on an open set $S$. A \textbf{critical point} $P=(x_0,y_0)$ of $f$ is a point in $S$ such that\index{critical point}
\begin{itemize}
	\item $f_x(x_0,y_0) = 0$ or $f_x(x_0,y_0)$ is undefined, and
	\item $f_y(x_0,y_0) = 0$ or $f_y(x_0,y_0)$ is undefined.
\end{itemize}
\end{definition}

\begin{theorem}[Critical Points and Relative Extrema]\label{thm:multi_critical_point}
Let $z=f(x,y)$ be defined on an open set $S$ containing $P=(x_0,y_0)$. If $f$ has a relative extrema at $P$, then $P$ is a critical point of $f$.\index{extrema!relative}\index{critical point}
\end{theorem}

Therefore, to find relative extrema, we find the critical points of $f$ and determine which correspond to relative maxima, relative minima, or neither.

\youtubeVideo{Hm5QnuDjNmY}{Local Maximum and Minimum Values / Function of Two Variables}

The following examples demonstrate this process.

\begin{example}[Finding critical points and relative extrema]\label{ex_multi_extreme1}
Let $f(x,y) = x^2+y^2-xy-x-2$. Find the relative extrema of $f$.
\solution
We start by computing the partial derivatives of $f$:
%
\mtable{The surface in \autoref{ex_multi_extreme1} with its absolute minimum indicated.}{fig:multi_extreme1}{%
\myincludeasythree{
3Droll=0,
3Dortho=0.0046491301618516445,
3Dc2c=0.6824884414672852 0.7120449542999268 0.16492848098278046,
3Dcoo=-1.6988685131072998 -2.1742968559265137 37.693851470947266,
3Droo=149.99999652386037}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figmulti_extreme1_3D}}
%
\[f_x(x,y) = 2x-y-1 \qquad \text{and}\qquad f_y(x,y) = 2y-x.\]
Each is never undefined. A critical point occurs when $f_x$ and $f_y$ are simultaneously 0, leading us to solve the following system of linear equations:
\[2x-y-1 = 0\qquad \text{and}\qquad -x+2y = 0.\]
This solution to this system is $x=2/3$, $y=1/3$. (Check that at $(2/3,1/3)$, both $f_x$ and $f_y$ are 0.)

The graph in \autoref{fig:multi_extreme1} shows $f$ along with this critical point. It is clear from the graph that this is a relative minimum; further consideration of the function shows that this is actually the absolute minimum.
\end{example}

\begin{example}[Finding critical points and relative extrema]\label{ex_multi_extreme2}
Let $f(x,y) = -\sqrt{x^2+y^2}+2$. Find the relative extrema of $f$.
\solution
We start by computing the partial derivatives of $f$:
\[f_x(x,y) = \frac{-x}{\sqrt{x^2+y^2}}\qquad \text{and}\qquad f_y(x,y) = \frac{-y}{\sqrt{x^2+y^2}}.\]
It is clear that $f_x=0$ when $x=0$ \& $y\neq0$, and that $f_y=0$ when $y=0$ \& $x\neq0$. At $(0,0)$, both $f_x$ and $f_y$ are \emph{not} $0$, but rather undefined.
The point $(0,0)$ is still a critical point, though, because the partial derivatives are undefined. This is the only critical point of $f$.

\mtable{The surface in \autoref{ex_multi_extreme2} with its absolute maximum indicated.}{fig:multi_extreme2}{%
\myincludeasythree{
3Droll=0,
3Dortho=0.005137228406965733,
3Dc2c=0.6936245560646057 0.5807817578315735 0.4261191189289093,
3Dcoo=-10.144089698791504 -8.685287475585938 24.90442657470703,
3Droo=150.00000093140036}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figmulti_extreme2_3D}}

The surface of $f$ is graphed in \autoref{fig:multi_extreme2} along with the point $(0,0,2)$. The graph shows that this point is the absolute maximum of $f$.
\end{example}

In each of the previous two examples, we found a critical point of $f$ and then determined whether or not it was a relative (or absolute) maximum or minimum by graphing. It would be nice to be able to determine whether a critical point corresponded to a max or a min without a graph. Before we develop such a test, we do one more example that sheds more light on the issues our test needs to consider.

\begin{example}[Finding critical points and relative extrema]\label{ex_multi_extreme3}
Let $f(x,y) = x^3-3x-y^2+4y$. Find the relative extrema of $f$.
\solution
Once again we start by finding the partial derivatives of $f$:
\[f_x(x,y) = 3x^2-3\qquad \text{and} \qquad f_y(x,y) = -2y+4.\]
Each is always defined. Setting each equal to 0 and solving for $x$ and $y$, we find
\begin{align*}
f_x(x,y) = 0 \quad &\Rightarrow x=\pm 1\\
f_y(x,y) = 0\quad &\Rightarrow y = 2.
\end{align*}
We have two critical points: $(-1,2)$ and $(1,2)$. To determine if they correspond to a relative maximum or minimum, we consider the graph of $f$ in \autoref{fig:multi_extreme3}.
\mtable{The surface in \autoref{ex_multi_extreme3} with both critical points marked.}{fig:multi_extreme3}{%
\myincludeasythree{
3Droll=0,
3Dortho=0.0051372298039495945,
3Dc2c=0.3608144223690033 0.8669211864471436 0.3438902795314789,
3Dcoo=-26.171857833862305 -6.6333465576171875 36.54817199707031,
3Droo=200.99999267271468}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figmulti_extreme3_3D}}

The critical point $(-1,2)$ clearly corresponds to a relative maximum. However, the critical point at $(1,2)$ is neither a maximum nor a minimum, displaying a different, interesting characteristic. 

If one walks parallel to the $y$-axis towards this critical point, then this point becomes a relative maximum along this path. But if one walks towards this point parallel to the $x$-axis, this point becomes a relative minimum along this path. A point that seems to act as both a max and a min is a \textbf{saddle point}. A formal definition follows.
\end{example}

\begin{definition}[Saddle Point]\label{def:saddle_point}
Let $P=(x_0,y_0)$ be in the domain of $f$ where $f_x=0$ and $f_y=0$ at $P$. We say $P$ is a \textbf{saddle point} of $f$ if, for every open disk $D$ containing $P$, there are points $(x_1,y_1)$ and $(x_2,y_2)$ in $D$ such that $f(x_0,y_0)>f(x_1,y_1)$ and $f(x_0,y_0)<f(x_2,y_2)$.
\index{saddle point}\index{critical point}
\end{definition}

At a saddle point, the instantaneous rate of change in all directions is 0 and there are points nearby with $z$-values both less than and greater than the $z$-value of the saddle point.

Before \autoref{ex_multi_extreme3} we mentioned the need for a test to differentiate between relative maxima and minima. We now recognize that our test also needs to account for saddle points. To do so, we consider the second partial derivatives of $f$.

Recall that with single variable functions, such as $y=f(x)$, if $\fp'(c)>0$, then $f$ is concave up at $c$, and if $\fp(c) =0$, then $f$ has a relative minimum at $x=c$. (We called this the Second Derivative Test.) Note that at a saddle point, it seems the graph is ``both'' concave up and concave down, depending on which direction you are considering.

It would be nice if the following were true:
\begin{center}
	\tagpdfsetup{table/tagging=presentation}
	\begin{tabular}{ c c c }
	$f_{xx}$ and $f_{yy} >0$ & $\Rightarrow$ & relative minimum\\
	$f_{xx}$ and $f_{yy} <0$ & $\Rightarrow$ & relative maximum\\
	$f_{xx}$ and $f_{yy}$ have opposite signs & $\Rightarrow$ & saddle point.
	\end{tabular}
\end{center}

However, this is not the case. Functions $f$ exist where $f_{xx}$ and $f_{yy}$ are both positive  but a saddle point still exists. In such a case, while the concavity in the $x$-direction is up (i.e., $f_{xx}>0$) and the concavity in the $y$-direction is also up (i.e., $f_{yy}>0$), the concavity switches somewhere in between the $x$- and $y$-directions.

To account for this, consider $D = f_{xx}f_{yy}-f_{xy}f_{yx}$. Since $f_{xy}$ and $f_{yx}$ are equal when continuous (refer back to \autoref{thm:mixed_partial}), we can rewrite this as $D = f_{xx}f_{yy}-f_{xy}^{\,2}$. Then $D$ can be used to test whether the concavity at a point changes depending on direction. If $D>0$, the concavity does not switch (i.e., at that point, the graph is concave up or down in all directions). If $D<0$, the concavity does switch. If $D=0$, our test fails to determine whether concavity switches or not. We state the use of $D$ in the following theorem.

\begin{theorem}[Second Derivative Test]\label{thm:multi_second_test}
Let $z=f(x,y)$ be defined on an open set containing a critical point $P=(x_0,y_0)$ where all second order derivatives of $f$ are continuous at $P$. Define
\index{Second Derivative Test}\index{maximum!relative/local}\index{minimum!relative/local}\index{saddle point}
\[D = f_{xx}(x_0,y_0)f_{yy}(x_0,y_0)-f_{xy}^{\,2}(x_0,y_0).\]
\begin{enumerate}
	\item If $D>0$ and $f_{xx}(x_0,y_0)>0$, then $P$ is a relative minimum of $f$.
	\item If $D>0$ and $f_{xx}(x_0,y_0)<0$, then $P$ is a relative maximum of $f$.
	\item If $D<0$, then $P$ is a saddle point of $f$.
	\item If $D=0$, the test is inconclusive.
\end{enumerate}
\end{theorem}

\begin{proof}
Let $\vec u=\bracket{h,k}$ be a unit vector.  Then at the critical point $P$, $D_{\vec u}\,f=0$.  This means that along the line $h(y-y_0)=k(x-x_0)$, $P$ is a critical point that is a maximum or minimum according to the sign of $D_{\vec u}^2\,f$.  Now,
\begin{align*}
 D_{\vec u}^2\,f
 &=D_{\vec u}(f_xh+f_yk)\\
 &=(f_xh)_xh+(f_xh)_yk+(f_yk)_xh+(f_yk)\\
 &=f_{xx}h^2+2f_{xy}hk+f_{yy}k^2
\end{align*}
because $f_{xy}$ and $f_{yx}$ are continuous and therefore equal.

Suppose now that $D>0$.  Then we must have $f_{xx}\neq0$, and we can complete the square to see that
\[
 D_{\vec u}^2\,f
 =f_{xx}\left(h+\frac{f_{xy}k}{f_{xx}}\right)^2
 +f_{yy}k^2-\frac{f_{xy}^{\,2}k^2}{f_{xx}}
 =f_{xx}
 \left[\left(h+\frac{f_{xy}k}{f_{xx}}\right)^2+\frac{Dk^2}{f_{xx}^{\,2}}\right].
\]
Because we assumed $D>0$, everything in the brackets is positive, and $D_{\vec u}^2\,f$ always has the same sign as $f_{xx}$.  This shows parts 1 and 2.

If $D<0$, our task is easier because we only need to find two different $\vec u$ that give $D_{\vec u}^2\,f$ opposite signs.  If $f_{xx}\neq0$, let $\vec v=\bracket{-f_{xy},f_{xx}}$ and we can choose
\[
 \begin{aligned}
  \vec u_1&=\frac1{\norm{\vec v}}\vec v \\
  \vec u_2&=\bracket{1,0}
 \end{aligned}
 \qquad\Rightarrow\qquad
 \begin{aligned}
   D_{\vec u_1}^2\,f&=\frac1{\norm{\vec v}^2}f_{xx}D\\
   D_{\vec u_2}^2\,f&=f_{xx}.
  \end{aligned}
\]
Similarly, if $f_{yy}\neq0$, let $\vec v=\bracket{f_{yy},-f_{xy}}$ and we can choose
\[
 \begin{aligned}
  \vec u_1&=\frac1{\norm{\vec v}}\vec v \\
  \vec u_2&=\bracket{0,1}
 \end{aligned}
 \qquad\Rightarrow\qquad
 \begin{aligned}
   D_{\vec u_1}^2\,f&=\frac1{\norm{\vec v}^2}f_{yy}D\\
   D_{\vec u_2}^2\,f&=f_{yy}.
  \end{aligned}
\]
Finally, if $f_{xx}=f_{yy}=0$, then $D_{\vec u}^2\,f=2f_{xy}hk$ has opposite signs for the vectors $\vec u_1=\frac1{\sqrt2}\bracket{1,1}$ and $\vec u_2=\frac1{\sqrt2}\bracket{1,-1}$.
\end{proof}

We first practice using this test with the function in the previous example, where we visually determined we had a relative maximum and a saddle point.

\begin{example}[Using the Second Derivative Test]\label{ex_multi_extreme4}
Let $f(x,y) = x^3-3x-y^2+4y$ as in \autoref{ex_multi_extreme3}. Determine whether the function has a relative minimum, maximum, or saddle point at each critical point.
\solution
We determined previously that the critical points of $f$ are $(-1,2)$ and $(1,2)$. To use the Second Derivative Test, we must find the second partial derivatives of $f$:
\[f_{xx} = 6x;\qquad f_{yy} = -2;\qquad f_{xy} = 0.\]
Thus $D(x,y) = -12x$. 

At $(-1,2)$: $D(-1,2) = 12>0$, and $f_{xx}(-1,2) = -6$. By the Second Derivative Test, $f$ has a relative maximum at $(-1,2)$.

At $(1,2)$: $D(1,2) = -12 <0$. The Second Derivative Test states that $f$ has a saddle point at $(1,2)$.

The Second Derivative Test confirmed what we determined visually.
\end{example}

\begin{example}[Using the Second Derivative Test]\label{ex_multi_extreme5}
Find the relative extrema of $f(x,y) = x^2y+y^2+xy$.
\solution
We start by finding the first and second partial derivatives of $f$:
\begin{align*}
f_x &= 2xy+y & f_y &= x^2+2y+x \\
f_{xx} &= 2y & f_{yy} &= 2\\
f_{xy} &= 2x+1 & f_{yx} &= 2x+1.
\end{align*}
We find the critical points by finding where $f_x$ and $f_y$ are simultaneously 0 (they are both never undefined). Setting $f_x=0$, we have:
\[f_x=0 \quad \Rightarrow \quad 2xy+y=0\quad \Rightarrow \quad y(2x+1)=0.\]
This implies that for $f_x=0$, either $y=0$ or $2x+1=0$.

Assume $y=0$ then consider $f_y=0$:
\begin{align*}
f_y &= 0\\
x^2+2y+x &= 0,  \qquad \text{and since $y=0$, we have}\\
x^2+x &= 0\\
x(x+1) & = 0.
\end{align*}
Thus if $y=0$, we have either $x=0$ or $x=-1$, giving two critical points: $(-1,0)$ and $(0,0)$. 

Going back to $f_x$, now assume $2x+1=0$, i.e., that $x=-1/2$, then consider $f_y=0$:
\begin{align*}
f_y &= 0\\
x^2+2y+x &= 0,  \qquad \text{and since $x=-1/2$, we have}\\
1/4+2y-1/2 &= 0\\
y&= 1/8.
\end{align*}
Thus if $x=-1/2$, $y=1/8$ giving the critical point $(-1/2,1/8)$. 

With $D = 4y-(2x+1)^2$, we apply the Second Derivative Test to each critical point.

At $(-1,0)$, $D <0$, so $(-1,0)$ is a saddle point.

At $(0,0)$, $D<0$, so $(0,0)$ is also a saddle point.

At $(-1/2,1/8)$, $D>0$ and $f_{xx} > 0$, so $(-1/2,1/8)$ is a relative minimum.
\mtable{Graphing $f$ from \autoref{ex_multi_extreme5} and its relative extrema.}{fig:multi_extreme5}{%
\myincludeasythree{
3Droll=0.0,
3Dortho=0.0046491301618516445,
3Dc2c=0.7690940499305725 0.052982430905103683 0.636935830116272,
3Dcoo=-7.478764533996582 19.195676803588867 15.916007995605469,
3Droo=150.0000019671413}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figmulti_extreme5_3D}}

\autoref{fig:multi_extreme5} shows a graph of $f$ and the three critical points. Note how this function does not vary much near the critical points --- that is, visually it is difficult to determine whether a point is a saddle point or relative minimum (or even a critical point at all!). This is one reason why the Second Derivative Test is so important to have.
\end{example}

\subsection{Constrained Optimization}

When optimizing functions of one variable such as $y=f(x)$, we made use of \autoref{thm:extremeVal}, the Extreme Value Theorem, that said that over a closed interval $I$, a continuous function has both a maximum and minimum value. To find these maximum and minimum values, we evaluated $f$ at all critical points in the interval, as well as at the endpoints (the ``boundary'') of the interval.
\index{constrained optimization}\index{optimization!constrained}

A similar theorem and procedure applies to functions of two variables. A continuous function over a closed set also attains a maximum and minimum value (see the following theorem). We can find these values by evaluating the function at the critical points in the set and over the boundary of the set. After formally stating this extreme value theorem, we give examples.

\begin{theorem}[Extreme Value Theorem]\label{thm:extremeVal3}
Let $z=f(x,y)$ be a continuous function on a closed, bounded set $S$. Then $f$ has an absolute maximum and an absolute minimum value on $S$.
\index{Extreme Value Theorem}
\end{theorem}

\mtable[-.5in]{Plotting the surface of $f$ along with the restricted domain $S$.}{fig:conopt1}{%
\myincludeasythree{
3Droll=0,
3Dortho=0.004952129442244768,
3Dc2c=0.4829294979572296 -0.6089988350868225 0.6292055249214172,
3Dcoo=16.360477447509766 -11.452425956726074 60.48027038574219,
3Droo=150.000003217617}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figconopt1_3D}
\\(a)\\
\pdftooltip{\begin{tikzpicture}
\begin{axis}[width=1.16\marginparwidth,tick label style={font=\scriptsize},
axis y line=middle,axis x line=middle,name=myplot,xtick={-2,2},minor x tick num=1,
extra x ticks={-1,1},ymin=-2.5,ymax=1.5,xmin=-2.1,xmax=2.1]
\draw [thick,draw={\colorone}] (axis cs:-1,-2)
 -- node [black,pos=.2,above,sloped] {\scriptsize $y=3x+1$} (axis cs:0,1)
 --node [black,pos=.6,below,sloped] {\scriptsize $y=-3/2x+1$} (axis cs:2,-2)
 --node [black,pos=.5,below,sloped] {\scriptsize $y=-2$}(axis cs:-1,-2);
\fill[black,draw=black] (axis cs:-1,-2) circle (1.5pt);
\fill[black,draw=black] (axis cs:2,-2) circle (1.5pt);
\fill[black,draw=black] (axis cs:0,1) circle (1.5pt);
\end{axis}
\node [right] at (myplot.right of origin) {\scriptsize $x$};
\node [above] at (myplot.above origin) {\scriptsize $y$};
\end{tikzpicture}}{ALT-TEXT-TO-BE-DETERMINED}
\\(b)}

\begin{example}[Finding extrema on a closed set]\label{ex_conopt1}
Let $f(x,y) = x^2-y^2+5$ and let $S$ be the triangle with vertices $(-1,-2)$, $(0,1)$ and $(2,-2)$. Find the maximum and minimum values of $f$ on $S$.
\solution
It can help to see a graph of $f$ along with the set $S$. In \autoref{fig:conopt1}(a) the triangle defining $S$ is shown in the $x$-$y$ plane in a dashed line. Above it is the surface of $f$; we are only concerned with the portion of $f$ enclosed by the ``triangle'' on its surface. 

We begin by finding the critical points of $f$. With $f_x = 2x$ and $f_y = -2y$, we find only one critical point, at $(0,0)$. 

We now find the maximum and minimum values that $f$ attains along the boundary of $S$, that is, along the edges of the triangle. In \autoref{fig:conopt1}(b) we see the triangle sketched in the plane with the equations of the lines forming its edges labeled. 

Start with the bottom edge, along the line $y=-2$. If $y$ is $-2$, then on the surface, we are considering points $f(x,-2)$; that is, our function reduces to $f(x,-2) = x^2-(-2)^2+5 = x^2+1=f_1(x)$. We want to maximize/minimize $f_1(x)=x^2+1$ on the interval $[-1,2]$. To do so, we evaluate $f_1(x)$ at its critical points and at the endpoints.  The critical points of $f_1$ are found by setting its derivative equal to 0:
\[\fp_1(x)=0\qquad \Rightarrow\qquad x=0,\]
so that we will need to evaluate $f$ at the points $(-1,-2)$, $(0,-2)$, and $(2,-2)$.
%Evaluating $f_1$ at this critical point, and at the endpoints of $[-1,2]$ gives:
%\begin{align*}
%f_1(-1) = 2 \qquad&\Rightarrow\qquad f(-1,-2) = 2\\
%f_1(0) = 1 \qquad&\Rightarrow \qquad f(0,-2) = 1\\
%f_1(2) = 5 \qquad&\Rightarrow \qquad f(2,-2) = 5.
%\end{align*}
%Notice how evaluating $f_1$ at a point is the same as evaluating $f$ at its corresponding point.

We need to do this process twice more, for the other two edges of the triangle.

Along the left edge, along the line $y=3x+1$, we substitute $3x+1$ in for $y$ in $f(x,y)$:
\[f(x,y) = f(x,3x+1) = x^2-(3x+1)^2+5 = -8x^2-6x+4 = f_2(x).\]
We want the maximum and minimum values of $f_2$ on the interval $[-1,0]$, so we evaluate $f_2$ at its critical points and the endpoints of the interval. We find the critical points:
\[\fp_2(x) = -16x-6=0 \qquad \Rightarrow \qquad x=-3/8,\]
so that we will need to evaluate $f$ at the points $(-1,-2)$, $(-\frac38,-\frac18)$, and $(0,1)$.

%Evaluate $f_2$ at its critical point and the endpoints of $[-1,0]$:
%\begin{align*}
%f_2(-1) = 2 \qquad&\Rightarrow\qquad f(-1,-2) = 2\\
%f_2(-3/8) = 41/8=5.125  \qquad&\Rightarrow \qquad f(-3/8,-0.125) = 5.125\\
%f_2(0) = 1 \qquad&\Rightarrow \qquad f(0,1) = 4.
%\end{align*}

Finally, we evaluate $f$ along the right edge of the triangle, where $y = -3/2x+1$. 
\[f(x,y) = f(x,-3/2x+1) = x^2-(-3/2x+1)^2+5 = -\frac54x^2+3x+4=f_3(x).\]
The critical points of $f_3(x)$ are:
\[\fp_3(x) = 0 \qquad \Rightarrow \qquad x=6/5,\]%=1.2.
so that we will need to evaluate $f$ at the points $(0,1)$, $(\frac65,-\frac45)$, and $(2,-2)$.

%We evaluate $f_3$ at this critical point and at the endpoints of the interval $[0,2]$:
%\begin{align*}
%f_3(0) = 4 \qquad&\Rightarrow\qquad f(0,1) = 4\\
%f_3(1.2) = 5.8  \qquad&\Rightarrow \qquad f(1.2,-0.8) = 5.8\\
%f_3(2) = 5 \qquad&\Rightarrow \qquad f(2,-2) = 5.
%\end{align*}
%One last point to test: the critical point of $f$, $(0,0)$. We find $f(0,0) = 5$.

\mtable{The surface of $f$ along with important points along the boundary of $S$ and the interior.}{fig:conopt1b}{%
\myincludeasythree{
3Droll=0,
3Dortho=0.00476991618052125,
3Dc2c=0.2722506821155548 -0.5407805442810059 0.7958868741989136,
3Dcoo=2.6561195850372314 25.95724868774414 7.351059436798096,
3Droo=200.99999823503413}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figconopt1c_3D}}

We now evaluate $f$ at a total of 7 different places, all shown in \autoref{fig:conopt1b}.
\begin{multline*}
 f(-1,-2)=2,\quad f(0,-2)=1,\quad f(2,-2)=5,\\
 f(-\frac38,-\frac18)=\frac{41}8,\quad
 f(0,1)=4,\quad\text{and}\quad f(\frac65,-\frac45)=\frac{29}5.
\end{multline*}

%We checked each vertex of the triangle twice, as each showed up as the endpoint of an interval twice.
Of all the $z$-values found, the maximum is $\frac{29}5$, found at $(\frac65,-\frac45)$; the minimum is 1, found at $(0,-2)$.
\end{example}

This portion of the text is entitled ``Constrained Optimization'' because we want to optimize a function (i.e., find its maximum and/or minimum values) subject to a \emph{constraint} --- some limit to what values the function can attain. In the previous example, we constrained ourselves by considering a function only within the boundary of a triangle. This was largely arbitrary; the function and the boundary were chosen just as an example, with no real ``meaning'' behind the function or the chosen constraint.

However, solving constrained optimization problems is a very important topic in applied mathematics. The techniques developed here are the basis for solving larger problems, where more than two variables are involved.

We illustrate the technique once more with a classic problem.

\begin{example}[Constrained Optimization]\label{ex_conopt2}
The U.S. Postal Service states that the girth+length of Standard Post Package must not exceed 130''. Given a rectangular box, the ``length'' is the longest side, and the ``girth'' is twice the width+height.

Given a rectangular box where the width and height are equal, what are the dimensions of the box that give the maximum volume subject to the constraint of the size of a Standard Post Package?
\solution
Let $w$, $h$, and $\ell$ denote the width, height, and length of a rectangular box; we assume here that $w=h$. The girth is then $2(w+h) = 4w$. The volume of the box is $V(w,\ell) = wh\ell = w^2\ell$. We wish to maximize this volume subject to the constraint $4w+\ell\leq 130$, or $\ell\leq 130-4w$. (Common sense also indicates that $\ell>0, w>0$, so that we don't need to check the boundary where either is zero.)

We begin by finding the critical points of $V$. We find that $V_w = 2w\ell$ and $V_\ell = w^2$; these are simultaneously 0 only when $w=0$. These give a volume of 0, so we can ignore these critical points. 

We now consider the volume along the constraint $\ell=130-4w.$ Along this line, we have:
\[V(w,\ell) = V(w,130-4w) = w^2(130-4w) = 130w^2-4w^3 = V_1(w).\]
The constraint is applicable on the $w$-interval $[0,32.5]$ as indicated in the figure. Thus we want to maximize $V_1$ on $[0,32.5]$. 

Finding the critical points of $V_1$, we take the derivative and set it equal to 0:
\begin{multline*}
 V\,'_1(w) = 260w-12w^2 = 0 \quad \Rightarrow \\
 w(260-12w)= 0 \quad \Rightarrow \\
 w=0,\frac{260}{12}\approx 21.67.
\end{multline*}

We found two critical points: when $w=0$ and when $w=21.67$. We again ignore the $w=0$ solution; the maximum volume, subject to the constraint, comes at $w=h=21.67$, $\ell = 130-4(21.6) =43.33.$ This gives a volume of $V(21.67,43.33) \approx 20{,}347$in\textsuperscript3. 

\mtable[\baselineskip]{Graphing the volume of a box with girth $4w$ and length $\ell$, subject to a size constraint.}{fig:conopt2}{%
\myincludeasythree{
3Droll=0,
3Dortho=0.005153999198228121,
3Dc2c=0.31346064805984497 -0.9024837017059326 0.2954072952270508,
3Dcoo=45.312767028808594 65.24303436279297 62.16134262084961,
3Droo=149.9999931723703}{\marginparwidth}{ALT-TEXT-TO-BE-DETERMINED}{figures/figconopt2_3D}}

The volume function $V(w,\ell)$ is shown in \autoref{fig:conopt2} along with the constraint $\ell = 130-4w$. As done previously, the constraint is drawn dashed in the $x$-$y$ plane and also along the surface of the function. The point where the volume is maximized is indicated.
\end{example}

It is hard to overemphasize the importance of optimization. In ``the real world,'' we routinely seek to make \emph{something} better. By expressing the \emph{something} as a mathematical function, ``making \emph{something} better'' means ``optimize \emph{some function.}'' 

The techniques shown here are only the beginning of an incredibly important field. Many functions that we seek to optimize are incredibly complex, making the step of ``find the gradient and set it equal to $\vec 0$'' highly nontrivial. Mastery of the principles here are key to being able to tackle these more complicated problems.

\printexercises{exercises/12-07-exercises}
